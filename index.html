<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://kit.fontawesome.com/cbebc4ac70.js" crossorigin="anonymous"></script>
  </head>
  <body>

    <div id='app'>

      <div class="overlay screen">
        
      </div>

      <transition name="fade">

        <div class="splash screen" v-if="showSplash">

          <!-- <h1 class="text-red center">NO FLASH</h1> -->
          <canvas width="1458" height="208"></canvas>
          <footer class="text-red italic floating">directed by a. n. zanota</footer>
        
        </div>

      </transition>
      
      <transition name="fade">

        <div key="menu" class="menu screen" v-if="state === 'menu'">

          <div class="numbers">
            <span v-for="(category, i) in categories" class="text-red bold button" :data-category="category.name"
              @mouseover="hoveredCategory = i"
              @mouseout="hoveredCategory = -1"
              @click="selectedCategory = i; state = `category_${i+1}`;">{{isLandscape ? i + 1 : category.name}}</span>
          </div>

          <transition name="fade">
            <footer class="floating text-red italic" v-if="hoveredCategory !== -1" :style="`display: ${windowWidth > 768 && !TOUCH ? 'auto' : 'none'}`">{{categories[hoveredCategory].name}}</footer>
          </transition>
        
        </div>

        <!-- ARTICLE SELECTION -->
        <div key="article-selection" class="article-selection screen" :class="{ scrollable: currentCategory.type !== 'articles' }" v-else-if="/category_[0-9]+/.test(state)">

          <header class="text-red italic">{{currentCategory.name}}</header>
          
          <!-- ARTICLE LIST -->
          <template v-if="currentCategory.type === 'articles'">

            <transition-group name="fade">
              <img class="preview-image" v-for="(article, i) in currentCategory.articles" :key="article.name" :src="article?.previewImgSrc" v-show="currentCategory.articles[hoveredArticle]?.name === article.name && isLandscape">
            </transition-group>
  
            <div class="items" @scroll="updateItems(this)" @wheel="scrollItems(this)">
              
              <span v-for="(article, i) in currentCategory.articles"
                @mouseover="hoveredArticle = i"
                @mouseout="hoveredArticle = -1"
                @click="selectedArticle = i; state = (selectedCategory + 1) + '_' + article.name.split(' ').join('_')">
                <span class="bold">({{i + 1}})</span> <span class="serif">{{article.name}}</span>&nbsp;
              </span>
  
            </div>

            <footer class="text-red italic button floating" @click="back">back</footer>

          </template>

          <!-- RESEARCH POSTERS -->
          <template v-else-if="currentCategory.type === 'research'">

            <div class="research-gallery">

              <img v-for="(article, index) in currentCategory.articles" 
                   :src="`images/3-RESEARCH/FMF-ISSUE-${index+1}.jpg`"
                   class="item"
                   @click="selectedArticle = index; state = (selectedCategory + 1) + '_' + article.name.split(' ').join('_')">

            </div>

            <footer class="text-red italic button" @click="back">back</footer>

          </template>

          <!-- IMAGES INDEX -->
          <template v-else-if="currentCategory.type === 'images'">
            
            <div class="image-gallery">
              <div v-for="img in imagesIndex" :data-src="img.src" :style='`background-image: url("${img.src}");`' @click="openSpotlight(this.event.target)" :data-url="img.url"></div>
            </div>

            <div class="spotlight"></div>
            <div class="spotlight-background" @click="closeSpotlight(this.event.target.tagName)">
              <span class="left button serif" @click="moveSpotlight(-1)"><i class="fas fa-arrow-left"></i></span>
              <span class="right button serif" @click="moveSpotlight(1)"><i class="fas fa-arrow-right"></i></span>
              <span class="open button serif" @click="openSpotlightArticle">open</span>
              <span class="id serif">{{spotlightImageIndex + 1}} - {{imagesIndex.length}}</span>
            </div>

            <footer class="text-red italic button" @click="back">back</footer>

          </template>

          <!-- PLAIN TEXT -->
          <template v-else-if="currentCategory.type === 'text'">

            <div class="about" v-html="currentCategory.el.innerHTML"></div>

            <footer class="text-red italic button" @click="back">back</footer>

          </template>
        
        </div>

        <div key="article-reader" class="article-reader screen" v-else>
          <header><span class="sans-serif bold">({{selectedArticle + 1}})</span> {{currentArticle.name}}</header>
          <div class="article" v-html="currentArticle.el.innerHTML.replace(/data-src/g, 'src')"></div>
          <footer class="italic center serif">
            <span class="button" @click="back">back</span>
          </footer>
        </div>

      </transition>

      <!-- START CONTENT DATA -->
      <div class="articles-data">

        <div class="category" data-name="architecture" data-type="articles">

          <div class="article" data-name="house for an enemy">
            <img data-src="images/1/house for an enemy/GL-S-01.png">
          </div>

          <div class="article" data-name="les invalides" data-preview-src="images/1/les invalides/PARIS-DEUX-4-CH-01.png">
            <img data-src="images/1/les invalides/PARIS-DEUX-1.1-E-10.png">
            <img data-src="images/1/les invalides/PARIS-DEUX-2-S-03.png">
            <img data-src="images/1/les invalides/PARIS-DEUX-2-S-04.png">
            <img data-src="images/1/les invalides/PARIS-DEUX-4-CH-01.png">
            <img data-src="images/1/les invalides/PARIS-DEUX-5-SB-01.png">
            <p>exercitationem ratione molestias.
              </p>
            <table>
              <tr>
                <td class="bold sans-serif">ABOUT</td>
                <td>not a renovation. </td>
              </tr>
              <tr>
                <td class="bold sans-serif">DETAILS</td>
                <td>2020, quartier des invalides, paris</td>
              </tr>
            </table>
          </div>

          <div class="article" data-name="the third room">
            <img data-src="">
          </div>
          
          <div class="article" data-name="imaged house">
            <img data-src="">
          </div>
          
          <div class="article" data-name="maison des jours meilleurs">
            <img data-src="">
          </div>
          
          <div class="article" data-name="incredulità di san tommaso">
            <img data-src="">
          </div>
          
          <div class="article" data-name="impression, soleil levant" data-preview-src="images/1/impression/Z-Seegarten-Morning-B-04.jpg">
            <img data-src="images/1/impression/Z-Seegarten-Morning-EXT-04.jpg">
            <img data-src="images/1/impression/Z-Seegarten-Morning-EXT-03.jpg">
            <img data-src="images/1/impression/Z-Seegarten-Morning-B-04.jpg">
          </div>
         
          </div>

        <div class="category" data-name="furniture" data-type="articles">

          <div class="article" data-name="marble table">
            <img data-src="images/2/marble-table/fmf-MARBLE-03.jpg">
            <img data-src="images/2/marble-table/fmf-MARBLE-02.jpg">
          </div>

        </div>

        <div class="category" data-name="research" data-type="research">

          <div class="article" data-name="FMF-ISSUE-1">awd</div>
          <div class="article" data-name="FMF-ISSUE-2"></div>
          <div class="article" data-name="FMF-ISSUE-3"></div>
          <div class="article" data-name="FMF-ISSUE-4"></div>
          <div class="article" data-name="FMF-ISSUE-5"></div>
          <div class="article" data-name="FMF-ISSUE-6"></div>
          <div class="article" data-name="FMF-ISSUE-7"></div>
          <div class="article" data-name="FMF-ISSUE-8"></div>
          <div class="article" data-name="FMF-ISSUE-9"></div>
          <div class="article" data-name="FMF-ISSUE-10"></div>

        </div>

        <div class="category" data-name="references" data-type="articles">

          <div class="article" data-name="otto e mezzo, federico fellini">
            <img data-src="https://i.imgur.com/2AXTUn1.png">
            <img data-src="https://film-grab.com/wp-content/uploads/photo-gallery/03%20(2).jpg?bwg=1547138265">
            <img data-src="https://i.imgur.com/YU8A0Nr.png">
            <img data-src="https://i.imgur.com/SwZQzVK.png">
            <img data-src="https://i.imgur.com/IzpbGU3.png">
            <img data-src="https://i.imgur.com/Nss16UY.png">
            <img data-src="https://film-grab.com/wp-content/uploads/photo-gallery/33%20(2).jpg?bwg=1547138264">
            <img data-src="https://i.imgur.com/Lc9Rf8C.png">
            <img data-src="https://film-grab.com/wp-content/uploads/photo-gallery/57%20(2).jpg?bwg=1547138264">
            <img data-src="https://i.imgur.com/11zmVYH.png">
            <table>
              <tr>
                <td class="bold sans-serif">YEAR</td>
                <td>1963</td>
              </tr>
              <tr>
                <td class="bold sans-serif">DIRECTOR</td>
                <td>Federico Fellini</td>
              </tr>
              <tr>
                <td class="bold sans-serif">SCREENPLAY</td>
                <td>Federico Fellini, Tullio Pinelli, Ennio Flaiano, Brunello Rondi</td>
              </tr>
              <tr>
                <td class="bold sans-serif">PHOTOGRAPHY</td>
                <td>Gianni Di Venanzo</td>
              </tr>
              <tr>
                <td class="bold sans-serif">STARRING</td>
                <td>Marcello Mastroianni, Claudia Cardinale, Anouk Aimée. Sandra Milo, Rossella Falk, Barbara Steele, Guido Alberti, Madeleine Lebeau, Jean Rougeul, Caterina Boratto, Annibale Ninchi, Giuditta Rissone</td>
              </tr>
            </table>
          </div>
          
          <div class="article" data-name="le mépris, jean-luc godard">
            <br>
            <img data-src="images/4-REFERENCES/MEPRIS-Title-01.jpg" style="margin-bottom:30px;">
            <img data-src="images/4-REFERENCES/MEPRIS-Title-02.jpg" style="margin-bottom:30px;">
            <img data-src="images/4-REFERENCES/MEPRIS-Title-03.jpg" style="margin-bottom:30px;">
            <img data-src="images/4-REFERENCES/MEPRIS-Title-04.jpg">
            <img data-src="https://i.imgur.com/w4Ot6nQ.png">
            <img data-src="https://film-grab.com/wp-content/uploads/photo-gallery/38%20(605).jpg?bwg=1547227783">
            <img data-src="https://i.imgur.com/gJuczSY.png">
            <img data-src="https://film-grab.com/wp-content/uploads/photo-gallery/39%20(605).jpg?bwg=1547227783">
            <img data-src="https://i.imgur.com/62ouxMz.png">
            <img data-src="https://film-grab.com/wp-content/uploads/photo-gallery/5%20(12).jpg?bwg=1547227784">
            <img data-src="https://i.imgur.com/XLa183J.png">
            <img data-src="https://film-grab.com/wp-content/uploads/photo-gallery/51%20(580).jpg?bwg=1547227783">
            <img data-src="https://i.imgur.com/40sSWJq.png">
            <img data-src="https://film-grab.com/wp-content/uploads/photo-gallery/62%20(498).jpg?bwg=1547227783">
            <table>
              <tr>
                <td class="bold sans-serif">YEAR</td>
                <td>1963</td>
              </tr>
              <tr>
                <td class="bold sans-serif">DIRECTOR</td>
                <td>Jean-Luc Godard</td>
              </tr>
              <tr>
                <td class="bold sans-serif">PHOTOGRAPHY</td>
                <td>Raoul Coutard</td>
              </tr>
              <tr>
                <td class="bold sans-serif">STARRING</td>
                <td>Brigitte Bardot, Jack Palance, Michel Piccoli, Giorgia Moll, Fritz Lang</td>
              </tr>
            </table>
          </div>
          
          <div class="article" data-name="down by law, jim jarmusch">
            <img data-src="https://i.imgur.com/szpcN9r.png">
            <img data-src="https://i.imgur.com/JE9vJTP.png">
            <img data-src="https://i.imgur.com/F5iWyEX.png">
            <img data-src="https://i.imgur.com/Fot06NA.png">
            <img data-src="https://i.imgur.com/Zfupfyd.png">
            <img data-src="https://i.imgur.com/TAnvryt.png">
            <img data-src="https://i.imgur.com/ahjp0Qk.png">
            <table>
              <tr>
                <td class="bold sans-serif">YEAR</td>
                <td>1986</td>
              </tr>
              <tr>
                <td class="bold sans-serif">DIRECTOR</td>
                <td>Jim Jarmusch</td>
              </tr>
              <tr>
                <td class="bold sans-serif">PHOTOGRAPHY</td>
                <td>Robby Müller</td>
              </tr>
              <tr>
                <td class="bold sans-serif">STARRING</td>
                <td>Tom Waits, John Lurie, Roberto Benigni, Nicoletta Braschi, Ellen Barkin</td>
              </tr>
            </table>
          </div>
          
          <div class="article" data-name="the thin red line, terrence malick">
            <img data-src="https://i.imgur.com/UB7zLyn.png">
            <img data-src="https://i.imgur.com/U83qTpz.png">
            <img data-src="https://i.imgur.com/CHn1Mxk.png">
            <img data-src="https://i.imgur.com/LYVbWP0.png">
            <img data-src="https://i.imgur.com/vYITlVM.png">
            <img data-src="https://i.imgur.com/iw8PXSF.png">
            <img data-src="https://i.imgur.com/8yGOVYn.png">
            <img data-src="https://i.imgur.com/6tecaze.png">
            <img data-src="https://i.imgur.com/d6va9iZ.png">
            <img data-src="https://i.imgur.com/CweEgLO.png">
            <img data-src="https://i.imgur.com/BqVemoh.png">
            <table>
              <tr>
                <td class="bold sans-serif">YEAR</td>
                <td>1998</td>
              </tr>
              <tr>
                <td class="bold sans-serif">DIRECTOR</td>
                <td>Terrence Malick</td>
              </tr>
              <tr>
                <td class="bold sans-serif">PHOTOGRAPHY</td>
                <td>John Toll</td>
              </tr>
              <tr>
                <td class="bold sans-serif">STARRING</td>
                <td>Sean Penn, Adrien Brody, Jim Caviezel, Ben Chaplin, George Clooney, John Cusack, Woody Harrelson, Elias Koteas, Nick Nolte, John C. Reilly, John Travolta</td>
              </tr>
            </table>
          </div>
          
        </div>

        <div class="category" data-name="index" data-type="images">

        </div>

        <div class="category" data-name="about" data-type="text">

          on the utility and inconvenience of architecture, on its uses and abuses. as an endless process of questioning its incoherences and mannerisms.

        </div>

      </div>
      <!-- END CONTENT DATA -->

    </div>
    
    <script src="app.js"></script>
  </body>
</html>
